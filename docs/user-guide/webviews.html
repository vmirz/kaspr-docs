<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="theme-color" content="#111" media="(prefers-color-scheme: dark)"/><style>:root{--nextra-primary-hue:212deg;--nextra-primary-saturation:100%;--nextra-primary-lightness:45%;--nextra-navbar-height:64px;--nextra-menu-height:3.75rem;--nextra-banner-height:2.5rem;--nextra-bg:250,250,250;}.dark{--nextra-primary-hue:204deg;--nextra-primary-saturation:100%;--nextra-primary-lightness:55%;--nextra-bg:17,17,17;}</style><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Kaspr"/><meta property="og:description" content="Event streaming for kubernetes"/><meta name="next-head-count" content="6"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/635426e315e84210.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/635426e315e84210.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f46ca112e063d8db.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-47a3ccf9d95117c6.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-e77d176265dd1488.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/812-5e569b1bebba50ac.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/docs/user-guide/webviews-1ad8f980cab9f224.js" defer="" crossorigin=""></script><script src="/_next/static/sHYpke9ZX4zoDuqqBR8T_/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/sHYpke9ZX4zoDuqqBR8T_/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><script>((e,o,s,u,d,m,l,h)=>{let i=document.documentElement,T=["light","dark"];function p(a){(Array.isArray(e)?e:[e]).forEach(g=>{let k=g==="class",S=k&&m?d.map(f=>m[f]||f):d;k?(i.classList.remove(...S),i.classList.add(a)):i.setAttribute(g,a)}),R(a)}function R(a){h&&T.includes(a)&&(i.style.colorScheme=a)}function c(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)p(u);else try{let a=localStorage.getItem(o)||s,g=l&&a==="system"?c():a;p(g)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div dir="ltr"><script>document.documentElement.setAttribute('dir','ltr')</script><div class="nextra-nav-container _sticky _top-0 _z-20 _w-full _bg-transparent print:_hidden"><div class="nextra-nav-container-blur"></div><nav class="_mx-auto _flex _h-[var(--nextra-navbar-height)] _max-w-[90rem] _items-center _justify-end _gap-4 _pl-[max(env(safe-area-inset-left),1.5rem)] _pr-[max(env(safe-area-inset-right),1.5rem)]"><a class="nextra-focus _flex _items-center hover:_opacity-75 ltr:_mr-auto rtl:_ml-auto" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 97.5 37.5"><defs><clipPath id="kaspr-logo_svg__a"><path d="M8.773 20.652h5.344v5.532H8.773Zm0 0"></path></clipPath><clipPath id="kaspr-logo_svg__b"><path d="M10.996 20.652h.902a2.22 2.22 0 0 1 2.22 2.223v1.082a2.217 2.217 0 0 1-2.22 2.219h-.902a2.22 2.22 0 0 1-2.223-2.219v-1.082c0-1.227.997-2.223 2.223-2.223m0 0"></path></clipPath><clipPath id="kaspr-logo_svg__c"><path d="M8.773 14.344h5.344v5.531H8.773Zm0 0"></path></clipPath><clipPath id="kaspr-logo_svg__d"><path d="M10.996 14.344h.902c1.227 0 2.22.992 2.22 2.219v1.085a2.217 2.217 0 0 1-2.22 2.22h-.902a2.22 2.22 0 0 1-2.223-2.22v-1.085a2.22 2.22 0 0 1 2.223-2.22m0 0"></path></clipPath><clipPath id="kaspr-logo_svg__e"><path d="M8.773 8.188h5.344v5.53H8.773Zm0 0"></path></clipPath><clipPath id="kaspr-logo_svg__f"><path d="M10.996 8.188h.902a2.22 2.22 0 0 1 2.22 2.218v1.086a2.217 2.217 0 0 1-2.22 2.219h-.902a2.22 2.22 0 0 1-2.223-2.219v-1.086c0-1.222.997-2.219 2.223-2.219m0 0"></path></clipPath><clipPath id="kaspr-logo_svg__g"><path d="M14.957 20.652h5.344v5.532h-5.344Zm0 0"></path></clipPath><clipPath id="kaspr-logo_svg__h"><path d="M17.18 20.652h.902a2.22 2.22 0 0 1 2.219 2.223v1.082a2.217 2.217 0 0 1-2.219 2.219h-.902a2.22 2.22 0 0 1-2.223-2.219v-1.082c0-1.227.996-2.223 2.223-2.223m0 0"></path></clipPath><clipPath id="kaspr-logo_svg__i"><path d="M14.957 14.344h5.344v5.531h-5.344Zm0 0"></path></clipPath><clipPath id="kaspr-logo_svg__j"><path d="M17.18 14.344h.902c1.227 0 2.219.992 2.219 2.219v1.085a2.217 2.217 0 0 1-2.219 2.22h-.902a2.22 2.22 0 0 1-2.223-2.22v-1.085a2.22 2.22 0 0 1 2.223-2.22m0 0"></path></clipPath><clipPath id="kaspr-logo_svg__k"><path d="M2.8 20.652h5.345v5.532H2.8Zm0 0"></path></clipPath><clipPath id="kaspr-logo_svg__l"><path d="M5.02 20.652h.902c1.226 0 2.223.996 2.223 2.223v1.082a2.22 2.22 0 0 1-2.223 2.219H5.02a2.217 2.217 0 0 1-2.22-2.219v-1.082a2.22 2.22 0 0 1 2.22-2.223m0 0"></path></clipPath></defs><path fill="currentColor" d="M29.59 16.826v2.282q-.002.189.031.25.048.046.14.046c.052 0 .114-.023.188-.078q.106-.076.375-.312l1.22-1.14q.264-.235.359-.376a.5.5 0 0 0 .093-.281q-.002-.14-.156-.422-.157-.28-.156-.422 0-.406.562-.594.576-.187 1.813-.187 1.106 0 1.61.219.498.206.5.687c0 .156-.04.29-.11.39a.43.43 0 0 1-.281.188l-.829.125a.4.4 0 0 1-.125.016q-.767.13-1.484.797l-.516.5-.187.187c-.156.149-.234.25-.234.313 0 .074.07.219.218.437q.234.315.703.86a64 64 0 0 0 1.61 1.843q.78.844 1.25 1.313c.351.344.765.574 1.234.687l.14.047c.165.063.29.149.376.25q.14.16.14.36c0 .343-.187.586-.562.718q-.562.188-2.25.188h-.453q-.69.002-1.016-.156-.33-.17-.734-.625a76 76 0 0 1-2.016-2.407q-1.113-1.406-1.265-1.406c-.043 0-.075.024-.094.063-.024.043-.031.133-.031.265v.813q0 .86.046 1.219.061.362.204.484.093.064.328.187.623.283.625.735-.002.518-.625.719c-.407.132-1.153.203-2.235.203q-1.629-.002-2.25-.203-.61-.201-.61-.72 0-.419.485-.687c.32-.187.5-.3.532-.343.07-.102.125-.38.156-.829q.047-.67.047-3.203v-2.25c0-1.468-.024-2.453-.063-2.953-.031-.5-.094-.804-.187-.922q-.065-.091-.641-.265-.58-.186-.578-.64-.001-.235.203-.438.2-.2.61-.375.918-.436 1.796-.672c.582-.164 1.078-.25 1.485-.25q.42.002.562.203.14.205.14.844 0 .235-.046 1.812a98 98 0 0 0-.047 2.906m0 0"></path><path fill="currentColor" d="M43.424 19.67v-.922q0-.95-.234-1.312-.235-.36-.828-.36-.626 0-1.375.735a.7.7 0 0 1-.11.093l-.093.094c-.688.649-1.305.969-1.844.969q-.504 0-.797-.281-.299-.281-.297-.766 0-1.03 1.406-1.797 1.407-.78 3.469-.781 2.076 0 3.031.797.951.784.953 2.515c0 .344-.015.79-.046 1.329-.024.53-.032.89-.032 1.078v1.437c0 .281.016.492.047.625q.045.188.172.266c.07.055.281.137.625.25q.53.158.531.515-.002.363-.25.688-.253.315-.781.625a4 4 0 0 1-.875.375q-.438.14-.812.14-.534 0-1.063-.546-.534-.563-.594-.563c-.031 0-.12.055-.265.156q-1.267.955-2.703.954-1.583 0-2.532-.844-.937-.844-.937-2.25c0-1.051.398-1.867 1.203-2.453q1.2-.874 3.375-.875.339 0 .75.03c.281.024.582.048.906.08m-.015 2.969v-1.531a6 6 0 0 0-.375-.079 3 3 0 0 0-.438-.03c-.594 0-1.055.136-1.375.405q-.468.411-.469 1.172 0 .657.344 1.032.358.375.969.375.687 0 1.015-.329.33-.325.329-1.015m0 0"></path><path fill="currentColor" d="M48.035 18.53q-.002-1.374.922-2.22.922-.857 2.422-.859.357.002.813.078.468.064.562.063.172.001.547-.156.375-.172.563-.172a.84.84 0 0 1 .421.14c.157.094.297.227.422.391q.405.551.657 1.219c.164.437.25.828.25 1.172q0 .39-.188.625a.57.57 0 0 1-.484.234.8.8 0 0 1-.438-.125q-.204-.141-.484-.516a4 4 0 0 1-.219-.296q-.815-1.11-1.64-1.11a.9.9 0 0 0-.626.235.68.68 0 0 0-.25.53q-.001.646 1.657 1.407.406.206.64.313 1.297.609 1.86 1.359.576.738.578 1.781c0 .969-.371 1.774-1.11 2.406q-1.095.955-2.812.954c-.305 0-.64-.04-1.016-.11a6 6 0 0 0-.687-.094q-.142 0-.453.094c-.211.07-.367.11-.469.11a.9.9 0 0 1-.469-.157 1.1 1.1 0 0 1-.39-.406 5.3 5.3 0 0 1-.641-1.25q-.234-.654-.234-1.156c0-.301.07-.551.218-.75a.67.67 0 0 1 .563-.297c.32 0 .707.352 1.156 1.047q.2.316.313.469.31.468.843.75c.364.18.739.265 1.125.265q.528.001.844-.25a.78.78 0 0 0 .328-.656c0-.477-.68-1.055-2.031-1.734l-.11-.047q-1.815-.872-2.39-1.563-.563-.686-.563-1.719M60.844 21.873c0 .805.117 1.371.359 1.703q.358.486 1.219.485.936 0 1.531-.797.593-.797.594-2.11c0-.957-.211-1.722-.625-2.296q-.627-.874-1.64-.875-.738.002-1.095.437-.344.423-.343 1.297Zm0-5.672v.36a1 1 0 0 0 .015.203q.03.047.094.047c.062 0 .187-.086.375-.266q1.171-1.061 2.453-1.062 1.811 0 3.078 1.453t1.266 3.61q-.001 1.14-.406 2.124a5.2 5.2 0 0 1-1.157 1.75q-.703.72-1.593 1.094a4.7 4.7 0 0 1-1.829.375 3.63 3.63 0 0 1-2.015-.61q-.159-.107-.188-.109c-.043 0-.074.055-.093.156a2 2 0 0 0-.032.453c0 .625.008 1.063.032 1.313q.046.375.14.516.077.076.656.328.593.264.594.687 0 .48-.75.703-.737.219-2.453.22-1.517-.001-2.125-.22-.596-.204-.594-.703-.001-.455.625-.765l.328-.172q.17-.16.235-1.11.077-.937.078-4.078 0-2.543-.094-3.422-.08-.872-.312-1.047-.035-.03-.563-.187-.532-.17-.531-.64 0-.234.187-.438c.133-.133.333-.266.594-.39q.889-.406 1.766-.641c.594-.164 1.098-.25 1.515-.25q.388.002.547.156.155.158.157.562M69.998 21.701q-.001-1.698-.125-2.578-.112-.89-.36-1.078-.033-.029-.578-.203-.531-.17-.53-.64 0-.234.187-.438c.133-.133.332-.266.593-.39q.891-.406 1.782-.641c.601-.164 1.11-.25 1.515-.25q.31.001.47.125a.67.67 0 0 1 .233.39q.06.282.079.688.028.408.156.406.152.001.422-.344l.125-.172q.469-.575.89-.828a1.75 1.75 0 0 1 .922-.265c.488 0 .88.18 1.172.53q.452.52.453 1.376-.002.767-.437 1.281-.423.516-1.063.516-.533 0-1.078-.47-.549-.481-.781-.483-.422 0-.594.64-.157.626-.156 2.688 0 1.36.047 1.765.044.394.172.547.074.082.625.328.562.236.562.688 0 .518-.656.719c-.43.132-1.227.203-2.39.203q-1.642-.002-2.25-.203-.61-.201-.61-.72 0-.451.61-.734.245-.123.327-.187.155-.107.203-.484.061-.387.063-1.782m0 0"></path><g clip-path="url(#kaspr-logo_svg__a)"><g clip-path="url(#kaspr-logo_svg__b)"><path fill="currentColor" d="M8.773 20.652h5.344v5.532H8.773Zm0 0"></path></g></g><g clip-path="url(#kaspr-logo_svg__c)"><g clip-path="url(#kaspr-logo_svg__d)"><path fill="currentColor" d="M8.773 14.344h5.344v5.531H8.773Zm0 0"></path></g></g><g clip-path="url(#kaspr-logo_svg__e)"><g clip-path="url(#kaspr-logo_svg__f)"><path fill="currentColor" d="M8.773 8.188h5.344v5.53H8.773Zm0 0"></path></g></g><g clip-path="url(#kaspr-logo_svg__g)"><g clip-path="url(#kaspr-logo_svg__h)"><path fill="currentColor" d="M14.957 20.652h5.344v5.532h-5.344Zm0 0"></path></g></g><g clip-path="url(#kaspr-logo_svg__i)"><g clip-path="url(#kaspr-logo_svg__j)"><path fill="currentColor" d="M14.957 14.344h5.344v5.531h-5.344Zm0 0"></path></g></g><g clip-path="url(#kaspr-logo_svg__k)"><g clip-path="url(#kaspr-logo_svg__l)"><path fill="currentColor" d="M2.8 20.652h5.345v5.532H2.8Zm0 0"></path></g></g></svg></a><div class="_flex _gap-4 _overflow-x-auto nextra-scrollbar _py-1.5"><a class="nextra-focus _text-sm contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 max-md:_hidden _whitespace-nowrap _ring-inset _font-medium _subpixel-antialiased" aria-current="true" href="/docs">Documentation</a></div><div class="_not-prose _relative _flex _items-center _text-gray-900 dark:_text-gray-300 contrast-more:_text-gray-800 contrast-more:dark:_text-gray-300 max-md:_hidden"><input spellcheck="false" class="_rounded-lg _px-3 _py-2 _transition-colors _w-full md:_w-64 _text-base _leading-tight md:_text-sm _bg-black/[.05] dark:_bg-gray-50/10 placeholder:_text-gray-500 dark:placeholder:_text-gray-400 contrast-more:_border contrast-more:_border-current [&amp;::-webkit-search-cancel-button]:_appearance-none" autoComplete="off" placeholder="Search documentation…" id="headlessui-combobox-input-:R1dn96:" role="combobox" type="search" aria-expanded="false" aria-autocomplete="list" data-headlessui-state="" value=""/></div><a class="nextra-focus" href="https://github.com/TotalWineLabs/kaspr" target="_blank" rel="noreferrer"><svg width="24" height="24" fill="currentColor" viewBox="3 3 18 18"><title>GitHub</title><path d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z"></path></svg><span class="_sr-only">GitHub</span></a><button class="_transition nextra-hamburger _rounded md:_hidden" aria-label="Menu" type="button" data-headlessui-state=""><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" class=""><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16"></path></g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12h16"></path><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 18h16"></path></g></svg></button></nav></div><div class="_mx-auto _flex _max-w-[90rem]"><div class="[transition:background-color_1.5s_ease] _bg-transparent"></div><aside class="nextra-sidebar-container _flex _flex-col md:_top-16 md:_shrink-0 motion-reduce:_transform-none motion-reduce:_transition-none [.resizing_&amp;]:_transition-none _transform-gpu _transition-all _ease-in-out print:_hidden md:_w-64 md:_sticky md:_self-start max-md:[transform:translate3d(0,-100%,0)]"><div class="_px-4 _pt-4 md:_hidden"><div class="_not-prose _relative _flex _items-center _text-gray-900 dark:_text-gray-300 contrast-more:_text-gray-800 contrast-more:dark:_text-gray-300"><input spellcheck="false" class="_rounded-lg _px-3 _py-2 _transition-colors _w-full md:_w-64 _text-base _leading-tight md:_text-sm _bg-black/[.05] dark:_bg-gray-50/10 placeholder:_text-gray-500 dark:placeholder:_text-gray-400 contrast-more:_border contrast-more:_border-current [&amp;::-webkit-search-cancel-button]:_appearance-none" autoComplete="off" placeholder="Search documentation…" id="headlessui-combobox-input-:R5msr6:" role="combobox" type="search" aria-expanded="false" aria-autocomplete="list" data-headlessui-state="" value=""/></div></div><div class="_overflow-y-auto _p-4 _grow md:_h-[calc(100vh-var(--nextra-navbar-height)-var(--nextra-menu-height))] nextra-scrollbar"><div class="_transform-gpu _transition-all _ease-in-out motion-reduce:_transition-none _opacity-100" style="transition-duration:500ms"><div><ul class="_flex _flex-col _gap-1 nextra-menu-desktop max-md:_hidden"><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs">Overview</a></li><li class="open"><button class="_transition _items-center _justify-between _gap-2 _text-left _w-full _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" data-href="/docs/getting-started" type="button" data-headlessui-state="">Getting Started<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="_shrink-0 _rounded-sm _p-0.5 hover:_bg-gray-800/5 dark:hover:_bg-gray-100/5 motion-reduce:*:_transition-none *:_origin-center *:_transition-transform *:rtl:_-rotate-180 *:ltr:_rotate-90 *:rtl:_rotate-[-270deg]"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="_transform-gpu _transition-all _ease-in-out motion-reduce:_transition-none _opacity-100" style="transition-duration:500ms"><div><ul class="_flex _flex-col _gap-1 _relative before:_absolute before:_inset-y-1 before:_w-px before:_bg-gray-200 before:_content-[&quot;&quot;] dark:before:_bg-neutral-800 ltr:_pl-3 ltr:before:_left-0 rtl:_pr-3 rtl:before:_right-0 _pt-1 ltr:_ml-3 rtl:_mr-3"><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/getting-started/introduction">Introduction</a></li><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/getting-started/installation">Installation</a></li></ul></div></div></li><li class="open"><button class="_transition _items-center _justify-between _gap-2 _text-left _w-full _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" data-href="/docs/user-guide" type="button" data-headlessui-state="">User Guide<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="_shrink-0 _rounded-sm _p-0.5 hover:_bg-gray-800/5 dark:hover:_bg-gray-100/5 motion-reduce:*:_transition-none *:_origin-center *:_transition-transform *:rtl:_-rotate-180 *:ltr:_rotate-90 *:rtl:_rotate-[-270deg]"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="_transform-gpu _transition-all _ease-in-out motion-reduce:_transition-none _opacity-100" style="transition-duration:500ms"><div><ul class="_flex _flex-col _gap-1 _relative before:_absolute before:_inset-y-1 before:_w-px before:_bg-gray-200 before:_content-[&quot;&quot;] dark:before:_bg-neutral-800 ltr:_pl-3 ltr:before:_left-0 rtl:_pr-3 rtl:before:_right-0 _pt-1 ltr:_ml-3 rtl:_mr-3"><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/user-guide/concepts">Concepts</a></li><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/user-guide/kafka-basics">Kafka - Basics you need to know</a></li><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/user-guide/agents">Agents - Distributed stream processors</a></li><li class="_flex _flex-col _gap-1 active"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _bg-primary-100 _font-semibold _text-primary-800 dark:_bg-primary-400/10 dark:_text-primary-600 contrast-more:_border-primary-500 contrast-more:dark:_border-primary-500" href="/docs/user-guide/webviews">Webviews - Web interfaces for stream processing</a></li><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/user-guide/patterns">Agent Patterns - Common Use Cases</a></li></ul></div></div></li><li class="open"><button class="_transition _items-center _justify-between _gap-2 _text-left _w-full _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" data-href="/docs/api-reference" type="button" data-headlessui-state="">Reference<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="_shrink-0 _rounded-sm _p-0.5 hover:_bg-gray-800/5 dark:hover:_bg-gray-100/5 motion-reduce:*:_transition-none *:_origin-center *:_transition-transform *:rtl:_-rotate-180 *:ltr:_rotate-90 *:rtl:_rotate-[-270deg]"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="_transform-gpu _transition-all _ease-in-out motion-reduce:_transition-none _opacity-100" style="transition-duration:500ms"><div><ul class="_flex _flex-col _gap-1 _relative before:_absolute before:_inset-y-1 before:_w-px before:_bg-gray-200 before:_content-[&quot;&quot;] dark:before:_bg-neutral-800 ltr:_pl-3 ltr:before:_left-0 rtl:_pr-3 rtl:before:_right-0 _pt-1 ltr:_ml-3 rtl:_mr-3"><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/api-reference/v1alpha1">V1Alpha1</a></li></ul></div></div></li><li class="[word-break:break-word] _my-4"><hr class="_mx-2 _border-t _border-gray-200 dark:_border-primary-100/10"/></li><li class="_flex _flex-col _gap-1"><a class="nextra-focus _flex _rounded _px-2 _py-1.5 _text-sm _transition-colors [word-break:break-word] _cursor-pointer contrast-more:_border _text-gray-500 hover:_bg-gray-100 hover:_text-gray-900 dark:_text-neutral-400 dark:hover:_bg-primary-100/5 dark:hover:_text-gray-50 contrast-more:_text-gray-900 contrast-more:dark:_text-gray-50 contrast-more:_border-transparent contrast-more:hover:_border-gray-900 contrast-more:dark:hover:_border-gray-50" href="/docs/copyright">Copyright</a></li></ul></div></div></div><div class="nextra-sidebar-footer _sticky _bottom-0 _flex _items-center _gap-2 _py-4 _mx-3 _px-1" data-toggle-animation="off"><div class="_grow _flex _flex-col"><button title="Change theme" class="_h-7 _rounded-md _px-2 _text-xs _font-medium _transition-colors _text-gray-600 dark:_text-gray-400" id="headlessui-listbox-button-:R6tsr6:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><div class="_flex _items-center _gap-2 _capitalize"><svg fill="none" viewBox="3 3 18 18" width="12" height="12" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" fill="currentColor" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span class="">Light</span></div></button></div><button class="_transition max-md:_hidden _rounded-md _p-2 _text-gray-600 dark:_text-gray-400" title="Hide sidebar" type="button" data-headlessui-state=""><svg viewBox="0 0 16 16" fill="currentColor" height="12" class=""><path d="M4.177 7.823l2.396-2.396A.25.25 0 017 5.604v4.792a.25.25 0 01-.427.177L4.177 8.177a.25.25 0 010-.354z"></path><path fill-rule="evenodd" d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25V1.75zm1.75-.25a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25H9.5v-13H1.75zm12.5 13H11v-13h3.25a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25z"></path></svg></button></div></aside><nav class="nextra-toc _order-last max-xl:_hidden _w-64 _shrink-0 print:_hidden" aria-label="table of contents"><div class="_grid _grid-rows-[min-content_1fr_min-content] _sticky _top-[--nextra-navbar-height] _pt-6 _text-sm _max-h-[calc(100vh-var(--nextra-navbar-height))]"><p class="_mx-4 _font-semibold _tracking-tight _pb-2 _shadow-[0_12px_16px_rgb(var(--nextra-bg))] contrast-more:_shadow-none _z-[1]">On This Page</p><ul class="_px-4 nextra-scrollbar _overscroll-y-contain _overflow-y-auto _hyphens-auto _py-1.5"><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#what-is-a-kasprwebview" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">What Is a KasprWebView?</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#core-concepts" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Core Concepts</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#when-to-use-webviews" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">When to Use WebViews</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#quickstart-example" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Quickstart Example</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#anatomy-of-a-webview" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Anatomy of a WebView</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#request" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Request</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#processors-pipeline" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Processors Pipeline</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#operation-types" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Operation Types</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#example-map-operation" class="nextra-focus _ms-8 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Example <code class="nextra-code" dir="ltr">map</code> Operation</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#topicsend-operation" class="nextra-focus _ms-8 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">topicSend Operation</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#response-customization" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Response Customization</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#error-flow" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Error Flow</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#async-vs-sync-functions" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Async vs Sync Functions</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#complete-example-with-dynamic-partitioning" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Complete Example with Dynamic Partitioning</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#best-practices" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Best Practices</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#reading-from-tables-materialized-views" class="nextra-focus _ms-4 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Reading from Tables (Materialized Views)</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#use-case-enrich-response-with-table-data" class="nextra-focus _ms-8 _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Use Case: Enrich Response with Table Data</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#security-considerations" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Security Considerations</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#monitoring--observability" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Monitoring &amp; Observability</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#faq" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">FAQ</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#limitations--todos" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">Limitations &amp; TODOs</a></li><li class="_my-2 _scroll-my-6 _scroll-py-6"><a href="#see-also" class="nextra-focus _font-semibold _block _transition-colors _subpixel-antialiased _text-gray-500 hover:_text-gray-900 dark:_text-gray-400 dark:hover:_text-gray-300 contrast-more:_text-gray-900 contrast-more:_underline contrast-more:dark:_text-gray-50 _break-words">See Also</a></li></ul><div class="nextra-toc-footer _pt-4 _flex _flex-col _items-start _gap-2 _pb-4 _mx-4"><a class="nextra-focus _text-xs _font-medium _text-gray-600 dark:_text-gray-400 hover:_text-gray-800 dark:hover:_text-gray-200 contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100" href="https://github.com/vmirz/kaspr-docs/issues/new?title=Feedback%20for%20%E2%80%9CWebViews%20-%20HTTP%20Interfaces%20for%20Kaspr%20Apps%E2%80%9D&amp;labels=feedback" target="_blank" rel="noreferrer">Question? Give us feedback →</a><a class="nextra-focus _text-xs _font-medium _text-gray-600 dark:_text-gray-400 hover:_text-gray-800 dark:hover:_text-gray-200 contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100" href="https://github.com/vmirz/kaspr-docs/pages/docs/user-guide/webviews.mdx">Edit this page</a><button class="_transition _flex _items-center _gap-1.5 _whitespace-nowrap _opacity-0 _text-xs _font-medium _text-gray-600 dark:_text-gray-400 hover:_text-gray-800 dark:hover:_text-gray-200 contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100" aria-hidden="true" type="button" disabled="" data-headlessui-state="disabled" data-disabled="">Scroll to top<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="16" class="_-rotate-90 _border _rounded-full _border-current"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div></nav><div id="reach-skip-nav"></div><article class="_w-full _break-words nextra-content _flex _min-h-[calc(100vh-var(--nextra-navbar-height))] _min-w-0 _justify-center _pb-8 _pr-[calc(env(safe-area-inset-right)-1.5rem)]"><main class="_w-full _min-w-0 _max-w-6xl _px-6 _pt-4 md:_px-12"><div class="nextra-breadcrumb _mt-1.5 _flex _items-center _gap-1 _overflow-hidden _text-sm _text-gray-500 dark:_text-gray-400 contrast-more:_text-current"><a class="_whitespace-nowrap _transition-colors _min-w-6 _overflow-hidden _text-ellipsis nextra-focus _ring-inset hover:_text-gray-900 dark:hover:_text-gray-100" title="Documentation" href="/docs">Documentation</a><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="14" class="_shrink-0 rtl:_rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg><a class="_whitespace-nowrap _transition-colors _min-w-6 _overflow-hidden _text-ellipsis nextra-focus _ring-inset hover:_text-gray-900 dark:hover:_text-gray-100" title="User Guide" href="/docs/user-guide/concepts">User Guide</a><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="14" class="_shrink-0 rtl:_rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="_whitespace-nowrap _transition-colors _font-medium _text-gray-700 contrast-more:_font-bold contrast-more:_text-current dark:_text-gray-100 contrast-more:dark:_text-current" title="Webviews - Web interfaces for stream processing">Webviews - Web interfaces for stream processing</span></div><h1 class="_mt-2 _text-4xl _font-bold _tracking-tight _text-slate-900 dark:_text-slate-100">WebViews - HTTP Interfaces for Kaspr Apps</h1>
<h2 id="what-is-a-kasprwebview" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">What Is a KasprWebView?<a href="#what-is-a-kasprwebview" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">A <code class="nextra-code" dir="ltr">KasprWebView</code> exposes an HTTP endpoint backed by your Kaspr application logic. It lets you build lightweight, declarative, serverless-style request handlers that:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Accept HTTP requests (method + path) inside the cluster (and optionally via an ingress)</li>
<li class="_my-2">Run a programmable processing pipeline similar to <code class="nextra-code" dir="ltr">KasprAgent</code> operations</li>
<li class="_my-2">Dynamically publish messages to Kafka topics</li>
<li class="_my-2">Return structured HTTP responses with customizable status code, headers, and body</li>
</ul>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">WebViews are defined as Kubernetes custom resources (<code class="nextra-code" dir="ltr">KasprWebView</code>) and deployed alongside your <code class="nextra-code" dir="ltr">KasprApp</code>. They complement Agents by handling <em>pull-based</em> request/response flows (HTTP) instead of <em>push-based</em> stream consumption.</p>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current _border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"><svg viewBox="0 0 20 20" fill="currentColor" width="20" height="20" class="_mt-1"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path></svg></div><div class="_w-full _min-w-0 _leading-7">Use WebViews when you need an HTTP bridge into your streaming system—for example: REST ingestion, administrative triggers, or interactive tools.</div></div>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="core-concepts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Core Concepts<a href="#core-concepts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<table class="_not-prose _block _overflow-x-auto nextra-scrollbar [&amp;:not(:first-child)]:_mt-6 _p-0"><thead><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">Concept</th><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">Description</th></tr></thead><tbody><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Request</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Defines the HTTP method and path to bind (e.g. POST <code class="nextra-code" dir="ltr">/api/v2/kafka/topics/{topic}</code>).</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Processors</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">A pipeline of operations (functions) that transform the request or intermediate data.</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Operations</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Individual transformation or side-effect steps (<code class="nextra-code" dir="ltr">map</code> or <code class="nextra-code" dir="ltr">topicSend</code>).</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">topicSend</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Special operation that sends a record to a Kafka topic, optionally using dynamic selectors.</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Selectors</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">User-provided Python functions to compute dynamic values (topic name, key, value, headers, partition, predicates, response pieces).</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Response Handlers</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Functions that determine the final body, status code, and headers (success or error).</td></tr></tbody></table>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="when-to-use-webviews" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">When to Use WebViews<a href="#when-to-use-webviews" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Common scenarios:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2"><strong>REST → Kafka Ingestion</strong>: Accept batched JSON payloads and fan them out to a topic.</li>
<li class="_my-2"><strong>Command &amp; Control</strong>: Trigger administrative or orchestration events in your system.</li>
<li class="_my-2"><strong>Adhoc Tools</strong>: Provide a simple UI or CLI-friendly endpoint to inspect or publish data.</li>
<li class="_my-2"><strong>Validation / Pre-Processing</strong>: Apply synchronous validation before emitting to a stream.</li>
<li class="_my-2"><strong>Bridging External Systems</strong>: Allow external services to publish without embedding Kafka clients.</li>
<li class="_my-2"><strong>Materialized State Lookup</strong>: Read from a <code class="nextra-code" dir="ltr">KasprTable</code> (populated by Agents) to serve enriched or cached responses.</li>
</ul>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Not ideal for:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Long-lived streaming subscriptions (use Agents instead)</li>
<li class="_my-2">High-performance bulk data upload (consider specialized ingestion paths)</li>
</ul>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="quickstart-example" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Quickstart Example<a href="#quickstart-example" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">A minimal WebView that accepts a POST request and publishes messages to dynamic Kafka topics:</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kaspr.io/v1alpha1</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">KasprWebView</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">topic-publisher</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    kaspr.io/app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kafka-rest-proxy</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">topic-publisher</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">A web interface to publish messages to Kafka topics.</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">POST</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/api/v2/kafka/rest-proxy/topics/{topic}</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    contentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">application/json</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    statusCodeSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          def select_status_code(data):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              return 202</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  processors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">prepare</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">distribute</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">send</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    operations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">prepare</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            async def prepare(request, topic):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                values = await request.json()</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                messages = []</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                for value in values.get(&quot;content&quot;, []):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    messages.append({</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        &quot;topic&quot;: topic,</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        &quot;key&quot;: value.get(&quot;key&quot;),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        &quot;value&quot;: value.get(&quot;value&quot;),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        &quot;partition&quot;: value.get(&quot;partition&quot;),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                        &quot;has_errors&quot;: False</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    })</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                return messages</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">distribute</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            def distribute(messages):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                for m in messages:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    yield m</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">send</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        topicSend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          nameSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def select_topic(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return record.get(&quot;topic&quot;)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          keySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def select_key(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return record.get(&quot;key&quot;)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          valueSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def select_value(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return record.get(&quot;value&quot;)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          predicate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def should_send(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return record.get(&quot;has_errors&quot;) is False</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Apply it:</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> webview.yaml</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="anatomy-of-a-webview" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Anatomy of a WebView<a href="#anatomy-of-a-webview" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">A <code class="nextra-code" dir="ltr">KasprWebView</code> spec is composed of these major sections:</p>
<ol class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-decimal ltr:_ml-6 rtl:_mr-6">
<li class="_my-2"><code class="nextra-code" dir="ltr">request</code> – HTTP binding (method &amp; path)</li>
<li class="_my-2"><code class="nextra-code" dir="ltr">processors</code> – Transformation pipeline</li>
<li class="_my-2"><code class="nextra-code" dir="ltr">response</code> – How to render success/error HTTP responses</li>
</ol>
<h3 id="request" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Request<a href="#request" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">POST</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/api/v2/kafka/rest-proxy/topics/{topic}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Path parameters (e.g. <code class="nextra-code" dir="ltr">{topic}</code>) are made available as function arguments in operations.</p>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"></div><div class="_w-full _min-w-0 _leading-7">Use descriptive and versioned paths (e.g. <code class="nextra-code" dir="ltr">/api/v1/...</code>) for forward compatibility.</div></div>
<h3 id="processors-pipeline" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Processors Pipeline<a href="#processors-pipeline" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The processing model is similar to Agents: you define a <code class="nextra-code" dir="ltr">pipeline</code> ordering and implement each operation under <code class="nextra-code" dir="ltr">operations</code>.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">processors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">prepare</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">distribute</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">send</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  operations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">prepare</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        entrypoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">prepare</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          def prepare(request, topic):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              return []</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Rules:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Every name in <code class="nextra-code" dir="ltr">pipeline</code> must have a corresponding <code class="nextra-code" dir="ltr">operations</code> entry.</li>
<li class="_my-2"><code class="nextra-code" dir="ltr">map</code> functions return either a single value or an iterable/async iterable.</li>
<li class="_my-2">Generators / yielding allow fan-out semantics.</li>
</ul>
<h3 id="operation-types" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Operation Types<a href="#operation-types" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Currently supported operation capabilities:</p>
<table class="_not-prose _block _overflow-x-auto nextra-scrollbar [&amp;:not(:first-child)]:_mt-6 _p-0"><thead><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">Capability</th><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">Field</th><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">Purpose</th></tr></thead><tbody><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Transform</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600"><code class="nextra-code" dir="ltr">map</code></td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Produce new value(s) from input. Can return a value, list, or generator.</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Side Effect Publish</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600"><code class="nextra-code" dir="ltr">topicSend</code></td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Send to Kafka (with dynamic selectors) while continuing or terminating the chain.</td></tr></tbody></table>
<h4 id="example-map-operation" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl">Example <code class="nextra-code" dir="ltr">map</code> Operation<a href="#example-map-operation" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">normalize</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      def normalize(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          record[&quot;value&quot;] = (record.get(&quot;value&quot;) or &quot;&quot;).strip()</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          return record</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="topicsend-operation" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl">topicSend Operation<a href="#topicsend-operation" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><code class="nextra-code" dir="ltr">topicSend</code> allows emitting Kafka messages from within the pipeline.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">send</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  topicSend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">my-static-topic</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">           # or use nameSelector</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    keySerializer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">json</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">             # raw | json | pickle | binary</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    valueSerializer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">json</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    keySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def select_key(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return record.get(&quot;key&quot;)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    valueSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def select_value(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return record.get(&quot;value&quot;)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    headersSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def select_headers(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return {&quot;x-source&quot;: &quot;webview&quot;}</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    predicate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def should_send(record):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return True</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Selectors let you compute dynamic values per record. If <code class="nextra-code" dir="ltr">predicate</code> returns <code class="nextra-code" dir="ltr">False</code>, the message is skipped.</p>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current _border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"><svg viewBox="0 0 20 20" fill="currentColor" width="20" height="20" class="_mt-1"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path></svg></div><div class="_w-full _min-w-0 _leading-7">Either <code class="nextra-code" dir="ltr">name</code> or <code class="nextra-code" dir="ltr">nameSelector</code> must be provided. Use <code class="nextra-code" dir="ltr">nameSelector</code> when the target topic is derived from the request.</div></div>
<h3 id="response-customization" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Response Customization<a href="#response-customization" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">A WebView can dynamically control body, status code, and headers using <em>_Selector</em> handlers.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  contentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">application/json</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  statusCodeSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def success_status(data):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return 202</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    onError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def error_status(err):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return 400</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  bodySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def success_body(data):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return {&quot;accepted&quot;: True, &quot;count&quot;: len(data) if isinstance(data, list) else 1}</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    onError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def error_body(err):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return {&quot;error&quot;: str(err)}</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  headersSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        def success_headers(data):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return {&quot;x-processed&quot;: &quot;true&quot;}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">If no selectors are provided, defaults are used (status 200 or CRD-specified defaults, empty headers, body = serialized return object).</p>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current _border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">⚠️</div><div class="_w-full _min-w-0 _leading-7">Always sanitize error messages in <code class="nextra-code" dir="ltr">onError</code> handlers to avoid leaking sensitive details.</div></div>
<h3 id="error-flow" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Error Flow<a href="#error-flow" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">If any operation raises an exception:</p>
<ol class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-decimal ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Processing stops</li>
<li class="_my-2"><code class="nextra-code" dir="ltr">onError</code> selectors (if defined) are evaluated</li>
<li class="_my-2">A response is returned with computed status/body/headers</li>
</ol>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You can intentionally raise structured errors inside <code class="nextra-code" dir="ltr">map</code> for controlled failures.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    def validate(request):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        if not request.get(&quot;value&quot;):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            raise ValueError(&quot;missing value&quot;)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return request</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h3 id="async-vs-sync-functions" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Async vs Sync Functions<a href="#async-vs-sync-functions" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Functions may be <code class="nextra-code" dir="ltr">async def</code> when awaiting I/O (e.g., reading request JSON)</li>
<li class="_my-2">Downstream operations receive the resolved result</li>
</ul>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"></div><div class="_w-full _min-w-0 _leading-7">Use async only where necessary to keep the pipeline simple.</div></div>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="complete-example-with-dynamic-partitioning" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Complete Example with Dynamic Partitioning<a href="#complete-example-with-dynamic-partitioning" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kaspr.io/v1alpha1</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">KasprWebView</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">enriched-publisher</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    kaspr.io/app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ecommerce-app</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">enriched-publisher</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Accepts product events and publishes enriched records.</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">POST</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/api/v1/products/{region}</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  processors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">parse</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">enrich</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">send</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    operations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">parse</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            async def parse(request, region):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                payload = await request.json()</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                return payload.get(&quot;products&quot;, [])</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">enrich</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            def enrich(products, region):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                for p in products:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    p[&quot;region&quot;] = region</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    yield p</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">send</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        topicSend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">products.events</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          keySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def select_key(product):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return product.get(&quot;id&quot;)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          partitionSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def select_partition(product):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return hash(product.get(&quot;region&quot;)) % 8</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          predicate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              def allow(product):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  return product.get(&quot;active&quot;, True)</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    contentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">application/json</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    bodySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          def body(result):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">              return {&quot;processed&quot;: len(result) if isinstance(result, list) else 1}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="best-practices" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Best Practices<a href="#best-practices" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<h3 id="reading-from-tables-materialized-views" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">Reading from Tables (Materialized Views)<a href="#reading-from-tables-materialized-views" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">WebViews can <strong>read</strong> from <code class="nextra-code" dir="ltr">KasprTable</code> resources that are populated by <code class="nextra-code" dir="ltr">KasprAgent</code> processing. This enables low-latency, query-style HTTP endpoints over streaming state (e.g., product metadata, user profiles, counters, feature flags).</p>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current _border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">⚠️</div><div class="_w-full _min-w-0 _leading-7">WebViews cannot write/update table state. Only Agents mutate tables. Treat table access in WebViews as read-only cache access.</div></div>
<h4 id="use-case-enrich-response-with-table-data" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl">Use Case: Enrich Response with Table Data<a href="#use-case-enrich-response-with-table-data" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Suppose an Agent maintains a <code class="nextra-code" dir="ltr">products-table</code> keyed by product ID with details (name, category, price). A WebView can expose an HTTP endpoint to fetch enriched product info for a region.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">kaspr.io/v1alpha1</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">KasprWebView</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">product-lookup</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    kaspr.io/app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ecommerce-app</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">product-lookup</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">GET</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/api/v1/products/{product_id}/{region}</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  processors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">build</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">respond</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    operations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">build</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            def build(request, product_id, region):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                # request object gives access to headers if needed</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                # product_table injected via tables declaration below</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                return {&quot;product_id&quot;: product_id, &quot;region&quot;: region}</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">respond</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            def respond(state, product_table):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                # product_table is read-only; comes from a KasprTable resource</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                record = product_table.get(state[&quot;product_id&quot;], None)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                if record is None:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    # Raise to trigger error selectors (or rely on default 404 mapping if implemented)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    raise ValueError(&quot;product not found&quot;)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                # Enrich the base state with table record</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                state.update({</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  &quot;name&quot;: record.get(&quot;name&quot;),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  &quot;category&quot;: record.get(&quot;category&quot;),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                  &quot;price&quot;: record.get(&quot;price&quot;),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                })</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                return state</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Table references: make table available as param product_table</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    operations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">build</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            def build(request, product_id, region):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                return {&quot;product_id&quot;: product_id, &quot;region&quot;: region}</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">respond</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        tables</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">products-table</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">            paramName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">product_table</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">          python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            def respond(state, product_table):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                rec = product_table.get(state[&quot;product_id&quot;], None)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                if rec is None:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                    raise ValueError(&quot;product not found&quot;)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                state.update(rec)</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">                return state</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">  response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    contentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">application/json</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">    bodySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">      onError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">        python</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          def error_body(err):</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            return {&quot;error&quot;: str(err)}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Key points:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Tables declared under <code class="nextra-code" dir="ltr">operations[].tables</code> mirror Agent usage.</li>
<li class="_my-2">Function parameters receive the table object by the configured <code class="nextra-code" dir="ltr">paramName</code>.</li>
<li class="_my-2">Raise exceptions to signal not-found or invalid requests.</li>
<li class="_my-2">Avoid expensive per-request joins—tables should already contain prepared state curated by Agents.</li>
</ul>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"></div><div class="_w-full _min-w-0 _leading-7">Design tables as <em>materialized views</em> updated by streaming Agents; WebViews then serve them with millisecond latency.</div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Performance considerations:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Prefer small, key-based lookups (e.g., <code class="nextra-code" dir="ltr">product_id</code>) over full scans.</li>
<li class="_my-2">For composite queries, consider precomputing aggregate state in another table.</li>
</ul>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Security considerations:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Do not expose raw internal keys unless necessary.</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Sanitize or filter fields before returning table contents.</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Keep operations small and composable</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Validate inputs early (first operation)</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Use generators / yielding for large fan-out to avoid memory spikes</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Prefer <code class="nextra-code" dir="ltr">nameSelector</code> over hard-coded <code class="nextra-code" dir="ltr">name</code> only when truly dynamic</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Limit synchronous I/O in critical paths; push heavy work to Agents when possible</p>
</li>
<li class="_my-2">
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Centralize reusable Python snippets (TODO: shared code include feature)</p>
</li>
</ul>
<h2 id="security-considerations" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Security Considerations<a href="#security-considerations" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Expose WebViews via ingress only when necessary</li>
<li class="_my-2">Add authentication / authorization at the gateway layer (TODO: native auth support)</li>
<li class="_my-2">Sanitize and validate all request bodies</li>
<li class="_my-2">Avoid echoing raw exception strings in responses</li>
</ul>
<h2 id="monitoring--observability" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Monitoring &amp; Observability<a href="#monitoring--observability" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Log request path, method, and processing duration</li>
<li class="_my-2">Count emitted Kafka messages per WebView</li>
<li class="_my-2">Track error rates from <code class="nextra-code" dir="ltr">onError</code> selectors</li>
<li class="_my-2">Use partition metrics to validate distribution when using <code class="nextra-code" dir="ltr">partitionSelector</code></li>
</ul>
<h2 id="faq" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">FAQ<a href="#faq" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><strong>How is this different from an Agent?</strong><br/>
<!-- -->Agents consume continuously from streams; WebViews react to on-demand HTTP calls.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><strong>Can a WebView call an Agent?</strong><br/>
<!-- -->Indirectly—publish to a topic the Agent consumes.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><strong>Can I return streaming responses?</strong><br/>
<!-- -->Not yet. TODO: evaluate Server-Sent Events or chunked encoding support.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><strong>Are headers available in operations?</strong><br/>
<!-- -->Yes—request context includes headers. Pass them through your first <code class="nextra-code" dir="ltr">map</code> if you need them downstream.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><strong>Can I perform authentication inside a processor?</strong><br/>
<!-- -->Yes, but prefer an external gateway. You can raise an error to return a custom status code.</p>
<h2 id="limitations--todos" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">Limitations &amp; TODOs<a href="#limitations--todos" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2">Native auth / rate limiting (TODO)</li>
<li class="_my-2">Structured validation errors helper (TODO)</li>
<li class="_my-2">Shared code modules/imports (TODO)</li>
<li class="_my-2">Streaming responses (TODO)</li>
</ul>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h2 id="see-also" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-10 _border-b _pb-1 _text-3xl _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400">See Also<a href="#see-also" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="/docs/api-reference/v1alpha1#KasprWebView">API Reference: KasprWebView</a></li>
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="/docs/user-guide/agents">Agents Guide</a></li>
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="/examples/webview.yaml">Example Resource</a></li>
</ul><div class="_mt-16"></div><div class="_mb-8 _flex _items-center _border-t _pt-8 dark:_border-neutral-800 contrast-more:_border-neutral-400 dark:contrast-more:_border-neutral-400 print:_hidden"><a title="Agents - Distributed stream processors" class="nextra-focus _text-gray-600 dark:_text-gray-400 hover:_text-gray-800 dark:hover:_text-gray-200 contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 _flex _max-w-[50%] _items-center _gap-1 _py-4 _text-base _font-medium _transition-colors [word-break:break-word] md:_text-lg ltr:_pr-4 rtl:_pl-4" href="/docs/user-guide/agents"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" class="_inline _h-5 _shrink-0 ltr:_rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg>Agents - Distributed stream processors</a><a title="Agent Patterns - Common Use Cases" class="nextra-focus _text-gray-600 dark:_text-gray-400 hover:_text-gray-800 dark:hover:_text-gray-200 contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 _flex _max-w-[50%] _items-center _gap-1 _py-4 _text-base _font-medium _transition-colors [word-break:break-word] md:_text-lg ltr:_ml-auto ltr:_pl-4 ltr:_text-right rtl:_mr-auto rtl:_pr-4 rtl:_text-left" href="/docs/user-guide/patterns">Agent Patterns - Common Use Cases<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" class="_inline _h-5 _shrink-0 rtl:_rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></main></article></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{}},"page":"/docs/user-guide/webviews","query":{},"buildId":"sHYpke9ZX4zoDuqqBR8T_","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>